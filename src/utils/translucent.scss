@use 'api';

.ios {
  ion-header.header-translucent,
  ion-footer.footer-translucent {
    .header-background,
    .footer-background {
      backdrop-filter: none;
    }

    ion-toolbar {
      --border-width: 0;
      --background: transparent;
      /**
       * TODO: Not expect work.
       * https://github.com/ionic-team/ionic-framework/blob/3b80473f2fd5ad4da5a9f5d66f783a69909c8965/core/src/utils/transition/ios.transition.ts#L829C51-L829C60
       * --opacity: 0;
       */
      .toolbar-background {
        background: transparent !important;
      }
      ion-title {
        filter: blur(0);
        transform: translateY(0);
      }
    }
  }

  .header-collapse-main ion-toolbar.in-toolbar ion-title,
  .header-collapse-main ion-toolbar.in-toolbar ion-buttons {
    transition: all 0.5s ease-in-out;
  }

  .header-collapse-condense-inactive:not(.header-collapse-condense) ion-toolbar.in-toolbar ion-title,
  .header-collapse-condense-inactive:not(.header-collapse-condense) ion-toolbar.in-toolbar ion-buttons.buttons-collapse {
    filter: blur(2px);
    transform: translateY(8px);
  }

  ion-content::part(background)::before,
  ion-content::part(background)::after {
    content: '';
    position: absolute;
    width: 100%;
    pointer-events: none;
    z-index: 1;
  }

  .ion-page:has(ion-header.header-translucent) ion-content::part(background)::before {
    z-index: 2;
    top: 0;
    height: calc(68px + max(calc(var(--ion-safe-area-top) - 12px), 4px));
    box-shadow:
      inset 0 0 0 0 rgba(var(--ios26-color-background-rgb), 0),
      inset 0 calc(68px + max(calc(var(--ion-safe-area-top) - 12px), 4px)) 16px -16px rgba(var(--ios26-color-background-rgb), 0.8);
  }

  ion-content::part(background)::after {
    z-index: 2;
    bottom: 0;
    height: calc(56px + var(--ios26-floating-safe-area-bottom));
    box-shadow:
      inset 0 0 0 0 rgba(var(--ios26-color-background-rgb), 0),
      inset 0 calc(-55px - var(--ios26-floating-safe-area-bottom)) 16px -16px rgba(var(--ios26-color-background-rgb), 0.8);
  }

  .ion-page:has(ion-footer:not(.footer-translucent)) ion-content::part(background)::after {
    content: none;
  }
}
